/* syntax color */

:root {
	--astro-code-color-text: var(--text-1);
	--astro-code-color-background: var(--surface-0);
	--astro-code-token-constant: var(--accent-green);
	--astro-code-token-string: var(--accent-x);
	--astro-code-token-comment: var(--muted);
	--astro-code-token-keyword: var(--accent-red);
	--astro-code-token-parameter: var(--accent-x);
	--astro-code-token-function: var(--brand);
	--astro-code-token-string-expression: var(--brand-2);
	--astro-code-token-punctuation: var(--text-1);
	--astro-code-token-link: var(--accent-x);
}

code {
	background-color: var(--surface-0);
	border-radius: var(--radius-rounded);
	padding: 0.3em;
	font-family: var(--font-mono);
	font-size: var(--font-size-smaller);
}

pre {
	position: relative;
	overflow-x: auto;
	padding: var(--gutter);
	border-radius: var(--radius-rounded);
	z-index: 1;
}

pre > div {
	overflow-x: auto;
}

pre code {
	padding: unset;
}

pre button {
	z-index: 3;
	opacity: 0;
	/* visibility: hidden; */
	display: inline-flex;
	padding: var(--size-1) var(--size-2);
	font-family: var(--font-heading);
	border: var(--border-size-1) solid transparent;
	border-radius: var(--radius-rounded);
	text-decoration: none;
	cursor: pointer;
	font-weight: var(--font-weight-bold);
	text-align: center;
	align-items: center;
	justify-content: center;
	transition: 250ms ease-in-out filter, 250ms ease-in-out opacity;

	background-color: var(--surface-3);
	color: var(--text-1);
	border-color: var(--surface-3);

	font-family: var(--font-sans);
	font-size: var(--font-size-0);
	position: absolute;
	top: var(--size-2);
	right: var(--size-2);

	&:hover,
	&:focus-within {
		filter: brightness(1.1);
		/* visibility: visible; */
		opacity: 1;
	}
	&:active {
		filter: brightness(0.9);
		transform: scale(0.95);
	}
}

pre:focus-within, pre:hover {
 & button {
	/* visibility: visible; */
	opacity: 1;
 }
}

.language-id {
	/* display: none; */
	padding: var(--size-1) var(--size-2);
	color: var(--muted);
	font-size: var(--font-size-smaller);
	font-family: var(--font-mono);
	position: absolute;
	top: var(--size-2);
	right: var(--size-2);
}

pre:has(.language-id) {
	& .code-container code {
		counter-reset: step;
		counter-increment: step calc(var(--start, 1) - 1);
	}

	& .code-container code .line::before {
		content: counter(step);
		counter-increment: step;
		width: 3ch;
		margin-right: 2ch;
		display: inline-block;
		text-align: right;
		color: var(--muted);
		opacity: 0.7;
		transition: ease-in-out opacity 250ms;
	}
}


